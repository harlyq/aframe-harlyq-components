<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/0.9.2/aframe.js"></script>
    <!--script src="../../aframe/aframe-0.9.2.js"></script-->
    <script src="../dist/aframe-harlyq-components.js"></script>
    
    <script id="blobshader" type="x-shader/x-fragment">
      precision highp float;
      varying vec2 vUv;
      void main() {
        gl_FragColor = mix(vec4(0.), vec4(1.), 1. - smoothstep(.2, .5, length(vUv - .5)));
      }
    </script>
  </head>
  <body>
    <a-scene background="color: black" audio-vis="src: #music">
      <a-assets>
        <canvas id="blob" width="64" height="64"></canvas>
      </a-assets>
      <audio id="music" src="../../aframe-test-audio/assets/Quarkstar_-_Cricket_Seasoning_1.mp3" autoplay></audio>
      <a-entity procedural-texture="canvas: #blob; shader: #blobshader" visible="false">
      </a-entity>
      <a-entity id="snow" sprite-particles="texture: #blob; lifeTime: 1..3; spawnRate: 1000; opacity: 0,1,1,0; position: -10 -10 -10..10 10 10; velocity: -.2 -.2 -.2 .. .2 .2 .2; particleSize: 20"></a-entity>
      <a-entity id="shapes" position="0 0 -20" visible="false">
        <a-plane position="0 -4 0" scale="2 2 2"></a-plane>
        <a-circle position="-4 -4 0"></a-circle>
        <a-triangle position="4 -4 0" scale="2 2 2"></a-triangle>
        <a-ring position="-8 -4 0"></a-ring>
        <a-cylinder position="0 0 0" scale="1 2 1"></a-cylinder>
        <a-sphere position="-4 0 0"></a-sphere>
        <a-cone position="4 0 0" scale="1 2 1"></a-cone>
        <a-torus position="-8 0 0"></a-torus>
        <a-torus-knot position="8 0 0"></a-torus-knot>
        <a-box position="0 4 0" scale="2 2 2"></a-box>
        <a-octahedron position="4 4 0"></a-octahedron>
        <a-dodecahedron position="-4 4 0"></a-dodecahedron>
        <a-icosahedron position="-8 4 0"></a-icosahedron>
      </a-entity>
      <a-plane position="0 0 -5" rotation="-90 0 0" scale="20 10 10"></a-plane>
      <a-entity class="logs" position="0 0 -5">
        <a-cylinder segments-radial="6" segments-height="1" position="0 .2 0" scale=".1 .7 .1" color="brown" rotation="-5 10 80"></a-cylinder>
        <a-cylinder segments-radial="6" segments-height="1" position=".1 .1 0" scale=".1 .7 .1" color="brown" rotation="7 29 87"></a-cylinder>
        <a-cylinder segments-radial="6" segments-height="1" position="0 .05 0" scale=".1 .7 .1" color="brown" rotation="-17 -29 87"></a-cylinder>
      </a-entity>
      <a-entity id="whole" class="fire" position="0 .25 -5" wait-emit="debug: true; events: keyframestart; source: #p1; out: startRotor" keyframe="debug: true; events: startRotor; duration: 10; rotation: ,0 360 0;">
        <a-light type="point" keyframe="duration: .1; position: -.1 1 -.1.. .1 1 .1; color: white; randomizeLoop:true"></a-light>
        <a-octahedron id="p1" scale="0 0 0" keyframe="debug: true; delay: 8; duration: .5; position: 0 0 0,.1 .1 0; rotation: 0 20 0; scale: .3 .3 .3; color: orange; bubbles: true"></a-octahedron>
        <a-octahedron id="p2" scale="0 0 0" keyframe="delay: 7; duration: .45; position: -.05 0 .1,-.1 .1 0; scale: .25 .25 .25;"></a-octahedron>
        <a-octahedron id="p3" scale="0 0 0" keyframe="delay: 6; duration: 1; position: 0 0 0,-.05 0.5 .1,-.1 1 .5; scale: .1 .1 .1,.06 .06 .07; color: yellow"></a-octahedron>
        <a-octahedron id="p4" scale="0 0 0" keyframe="delay: 5; duration: 1.1; position: 0 0 0,.2 .4 -.21,.3 .9 -.5; scale: .1 .1 .1,.05 .05 .05; color: yellow,red"></a-octahedron>
        <a-octahedron id="p5" scale="0 0 0" keyframe="delay: 4; duration: 1.5; position: 0 0 0,.3 1.9 -.5; rotation: 0 120 0; scale: .35 .35 .35,.3 .3 .3; opacity: 1,.7,.2; color: #444"></a-octahedron>
        <a-octahedron id="p6" scale="0 0 0" keyframe="delay: 3; duration: 1.2; position: 0 0 0,-.3 1.8 .5; rotation: 0 -30 0; scale: .35 .35 .35,.3 .3 .3; opacity: 1,.8,.1; color: #444"></a-octahedron>
        <a-octahedron id="p71" scale="0 0 0" keyframe="delay: 2; duration: 1.3; position: 0 0 0,-.5 2 .1; rotation: 0 -60 0; scale: .35 .35 .35,.3 .3 .3; opacity: 1,.9,.2; color: #444"></a-octahedron>
        <a-octahedron id="p8" scale="0 0 0" keyframe="delay: 1; duration: .9; position: 0 0 0,.4 1.75 .2; rotation: 0 -60 0; scale: .35 .35 .35,.3 .3 .3; opacity: 1,.8,.2; color: #444"></a-octahedron>
      </a-entity>
      <a-entity class="tree" position="-5 0 -5">
        <a-cone segments-radial="8" segments-height="1" position="0 1.5 0" scale="1 2 1" rotation="0 20 0" color="green"></a-cone>
        <a-cone segments-radial="8" segments-height="1" position="0 2.4 0" scale=".8 1.6 .8" rotation="0 -5 -5" color="green"></a-cone>
        <a-cone segments-radial="8" segments-height="1" position="0 3.3 0" scale=".5 1 .5" rotation="2 15 2" color="green"></a-cone>
        <a-cylinder segments-radial="6" segments-height="1" position="0 .2 0" scale=".2 .7 .2" color="brown" rotation="0 0 0"></a-cylinder>
      </a-entity>
      <a-entity class="star" position="0 20 0">
        <a-box></a-box>
        <a-box rotation="45 45 90"></a-box>
      </a-entity>
      <a-entity class="forest">
        <a-entity clone-geometry="src:.tree" position="5 0 -5" scale=".8 .9 .7"></a-entity>
        <a-entity clone-geometry="src:.tree" position="2 0 -6"></a-entity>
        <a-entity clone-geometry="src:.tree" position="-3 0 -5" scale="1.1 .9 1.2"></a-entity>
        <a-entity clone-geometry="src:.tree" position="2 0 -2" scale="1.4 1.5 1.3"></a-entity>
      </a-entity>
      <a-entity class="sky">
        <a-entity clone-geometry="src:.star" position="-20 20 -20" audio-vis="bins: 2,3,4; scale: .1 .1 .1 .. .4 .4 .4"></a-entity>
        <a-entity clone-geometry="src:.star" position="-15 17 -25" audio-vis="bins: 5,6,7; scale: .1 .1 .1 .. .5 .5 .5"></a-entity>
        <a-entity clone-geometry="src:.star" position="-10 19 -18" audio-vis="bins: 2,3,4; scale: .2 .2 .2 .. .4 .4 .4"></a-entity>
        <a-entity clone-geometry="src:.star" position="20 21 -21" audio-vis="bins: 5,6,7; scale: .1 .1 .1 .. .6 .6 .6"></a-entity>
        <a-entity clone-geometry="src:.star" position="22 20 -18" audio-vis="bins: 2,3,4; scale: .1 .1 .1 .. .4 .4 .4"></a-entity>
        <a-entity clone-geometry="src:.star" position="-17 17 23" audio-vis="bins: 5,6,7; scale: .1 .1 .1 .. .5 .5 .5"></a-entity>
        <a-entity clone-geometry="src:.star" position="12 19 -15" audio-vis="bins: 2,3,4; scale: .2 .2 .2 .. .4 .4 .4"></a-entity>
        <a-entity clone-geometry="src:.star" position="-18 21 -17" audio-vis="bins: 5,6,7; scale: .1 .1 .1 .. .6 .6 .6"></a-entity>
      </a-entity>
  </a-scene>
  </body>
</html>